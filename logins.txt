Работа №1 Права доступа к объектам в Linux и управление учётными записями

Информация об учётных записях хранится в файле /etc/passwd
Пример:

gnome-initial-setup:x:126:65534::/run/gnome-initial-setup/:/bin/false
hplip:x:127:7:HPLIP system user,,,:/run/hplip:/bin/false
gdm:x:128:134:Gnome Display Manager:/var/lib/gdm3:/bin/false
alexander:x:1000:1000:alexander,,,:/home/alexander:/bin/bash
student:x:1001:1001::/home/student:/bin/bash


Имя польз.:х:номер польз.:номер группы:имя группы по умолчанию, :домашний каталог:командная оболочка

Информация о паролях доступна только для администратора и хранится в файле /etc/shadow
root:!:19963:0:99999:7:::
daemon:*:19773:0:99999:7:::

Имя пользователя:Зашифрованный пароль:последнее изменение пароля:Минимальный возраст:максимальный возраст:срок предупреждения:срок бездейтсвия:срок годности:резерв

Формат пароля: $type$salt$hashed
c ! начинается пароль заблокированной учётной записи
* - для процессов, которые не проходят процедуру регистрации в системе

Информация о группх в файле /etc/group
alexander:x:1000:
имя группы:х:номер группы:члены группы


Информация о паролях групп(для администратора) - /etc/gshadow
tmp:!::
Имя группы:пароль для группы:сроки пароля:

Создание пользователя 
sudo useradd -m -s /bin/bash <имя пользователя>

Создание группы:
sudo groupadd <имя группы>

Изменение пароля для пользователя:
sudo passwd <имя пользователя>

Изменение пароля для группы:
sudo gpasswd <имя группы>

Для изменения группы по умолчанию пользователь запускает команду newgrp
newgrp <Имя группы>

После смены группы права пользователя распростаняются на все объекты, у которых в группе владельцев указана новая группа пользователя

Смена группы владельцев любого объекта доступна для администратора:
sudo chown <имя учётной записи>:<имя группы><объект>
Пример
sudo chown :tempgrp /home/tmp
Результат
student@alexander-VirtualBox:~$ stat /home/tmp
  Файл: /home/tmp
  Размер: 4096      	Блоков: 8          Блок В/В: 4096   каталог
Устройство: 803h/2051d	Инода: 1059122     Ссылки: 4
Доступ: (0750/drwxr-x---)  Uid: ( 1002/     tmp)   Gid: ( 1004/ tempgrp)
Доступ:        2024-10-19 13:15:01.298815441 +0700
Модифицирован: 2024-10-19 13:14:56.499815028 +0700
Изменён:       2024-10-19 13:24:06.342862265 +0700
Создан:        2024-10-19 12:21:23.922539036 +0700

Смена владельца папки и всех владельцев внутри папки
sudo chown -R tmp2:tmp2 /home/tmp/Folder/

Изменение разрешений на объект для 3 категорий пользователей(u-владельцы, g-группа владельцев, o - все остальные):

sudo chmod <разрешение> <объект>

Пример(выдача полных разрешений для всех пользователей):
sudo chmod 777 /home/tmp/Folder

Выдача разрешений на запись для всех остальных пользователей на объект /home/tmp/Folder/f.txt
sudo chmod o+w /home/tmp/Folder/f.txt
